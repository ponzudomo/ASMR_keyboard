キーのビジュアル作りメモ

# ビジュアル作り

## 1. 使うツール

| フェーズ | ツール | 用途 |
| :--- | :--- | :--- |
| **素材生成** | Midjourney / DALL-E 3 | 氷のテクスチャ、クラック（ひび割れ）の画像生成 |
| **3Dモデリング** | **Spline** | 氷の質感（Glass Material）の構築、傾きイベントの設定 |
| **UI/UX設計** | **Figma** | キー配列のレイアウト、タイポグラフィ、プロトタイプ制作 |
| **画像加工** | Photoshop / GIMP | AI生成素材の透過処理、テクスチャの調整 |
| **実装** | Android Studio (Kotlin) | Spline Android Runtime を使用した3Dビューの統合 |

---

## 2. 制作ワークフロー

### Step 1: 氷テクスチャの生成 (AI)
- AIを使用して「真上から見た氷のキューブ」「透明感のあるテクスチャ」を生成。
- 後の3Dマッピング用に、光の方向が一定な素材を優先する。

### Step 2: Spline による3D構築
- **Material**: `Glass` レイヤーを使用。`Refraction`（屈折）と `Thickness`（厚み）を調整し、氷の質感を再現。
- **Mapping**: 生成したAI画像をテクスチャとして立方体に適用。
- **Interactivity**: `Events` パネルで `Tilt`（傾き）を設定。デバイスの傾斜に合わせて氷の反射角や位置が動くようにする。

### Step 3: Figma でのレイアウト設計
- キーボードの標準サイズに基づき、各キーの配置（Grid）を決定。
- 氷の質感を邪魔しない、視認性の高いフォントを選定。
- Splineのデザインをインポートし、全体の色彩バランスを微調整。

### Step 4: Android アプリへの統合
- Splineから `Android (Embed)` 形式でエクスポート。
- `InputMethodService` 内で `SplineView` を呼び出し、3Dシーンを背景としてレンダリング。
- センサー値（Rotation Vector）をSplineのパラメータにブリッジし、パララックスを完成させる。

---

## 3. 実装のポイント（備忘録）
- **9-patch**: キーの枠組みに画像を使う場合は、リサイズ耐性を持たせるために検討。
- **パフォーマンス**: 全てのキーを個別の3Dオブジェクトにすると重くなる可能性があるため、背景1枚の3Dシーンに全てのキーを含めるか、テクスチャアトラスを検討する。
- **透明度**: Androidの `SurfaceView` 上で背景を透過させ、視差効果がより際立つように設定する。